<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="expires" content="0">

    <title>Сокол СЭД - Вход</title>

    <link rel="stylesheet" href="css/bundle.css" />
    <link rel="stylesheet" href="css/app.css" />
    <script src="js/bundle.js"></script>
    <script src="js/app.js"></script>

    <style>
        body {
            padding-top: 40px;
            padding-bottom: 40px;
        }
    </style>
    <link rel="icon" type="image/png" href="icon.png?v=2" />

</head>

<body>
<div class="container">
    <div class="panel panel-default" style="max-width: 330px;margin: 0 auto;">
        <div class="panel-heading">
            <h3 class="panel-title">Вход</h3>
            </div>
        <div class="panel-body">
    <form id="loginForm" class="form-signin" action="login.html">


        <div class="form-group">
            <label for="inputEmail" class="">Учетное имя</label>
            <input name="user" id="inputEmail" class="form-control" placeholder1="Учетное имя" required autofocus>
        </div>
        <div class="form-group">
            <label for="inputPassword" class="">Пароль</label>
            <input type="password" name="password" id="inputPassword" class="form-control" placeholder1="Пароль"
                   required>
        </div>
        <p style="display: none;" id="errorMessage" class="text-danger">Неверное имя пользователя или пароль</p>
        <p style="display: none;" id="systemErrorMessage" class="text-danger">Ошибка на сервере. Обратитесь к администратору.</p>
        <!--<div class="checkbox">-->
            <!--<label>-->
                <!--<input type="checkbox" value="remember-me"> Запомнить-->
            <!--</label>-->
        <!--</div>-->
        <button id="submitButton" class="btn btn-primary btn-block">Войти</button>
    </form>
        </div>
    </div>

</div>
<script>
$("#submitButton").click(function(e) {
    e.preventDefault();
    var data = $("#loginForm").serialize();
    $.post("login", data, function(data) {
        if (data == "true") {
            $("#errorMessage").hide();
            $("#systemErrorMessage").hide();
            $("input").parent().removeClass("has-error");
            window.location.href = window.location.href.replace("login", "");
        } else {
            $("input").parent().addClass("has-error");
            $("#errorMessage").show();
        }
    }).fail(function(e) {
        $("#systemErrorMessage").show();
    });
});
</script>

</body>
</html>
